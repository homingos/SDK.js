/**
 * flamsdk v1.0.0
 * Author: bucharitesh
 * Date: 2022-09-02
 * License: MIT
 */

(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
  typeof define === 'function' && define.amd ? define(['exports'], factory) :
  (global = global || self, factory(global.FlamSaasSDK = {}));
}(this, (function (exports) { 'use strict';

  const SDK_BASE_URL = 'https://saas-sdk-flam.vercel.app';

  const PAGES = {
    main: SDK_BASE_URL,
    error: `${SDK_BASE_URL}/error`
  };

  let trackOrder = null;
  async function renderWithRetry({ url }) {
    const body = document.querySelector('body');

    const styleSheet = document.createElement('style');
    styleSheet.type = 'text/css';
    styleSheet.id = 'saas-sdk-style';
    styleSheet.innerText = `
    .flam-sdk-bg {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;

      min-height: 100vh;
      min-width: 100vw;
      border: none;
      background: rgba(0,0,0, 0.4);

      display: flex;
      justify-content: center;
      align-items: center;
    }

    #flam-sdk-iframe {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;

      min-height: 100vh;
      min-width: 100vw;
      border: none;
    }

    .flam-sdk-loading {
      display: inline-block;
      position: relative;
      width: 80px;
      height: 80px;
    }
    .flam-sdk-loading div {
      box-sizing: border-box;
      display: block;
      position: absolute;
      width: 64px;
      height: 64px;
      margin: 8px;
      border: 3px solid #000;
      border-radius: 50%;
      animation: flam-sdk-loading 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
      border-color: #000 transparent transparent transparent;
    }
    .flam-sdk-loading div:nth-child(1) {
      animation-delay: -0.45s;
    }
    .flam-sdk-loading div:nth-child(2) {
      animation-delay: -0.3s;
    }
    .flam-sdk-loading div:nth-child(3) {
      animation-delay: -0.15s;
    }
    @keyframes flam-sdk-loading {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
  `;

    await document.head.appendChild(styleSheet);

    const UI = await document.createElement('div');
    UI.id = 'flam-sdk-wrapper';

    var RegExp = /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i;

    const newUrl = () => {
      if (
        this.order_details &&
        this.order_details.theme &&
        this.order_details.theme.color &&
        RegExp.test(this.order_details.theme.color)
      ) {
        const x = '/?theme=';
        return url + x + encodeURIComponent(this.order_details.theme.color);
      }
      return url;
    };

    UI.innerHTML = `
      <div class="flam-sdk-ui" id="flam-sdk-ui">
        <div class="flam-sdk-bg" id="flam-sdk-bg">
          <div class="flam-sdk-loading" id="flam-sdk-loading"><div></div><div></div><div></div><div></div></div>
        </div>
        <iframe id="flam-sdk-iframe" style="opacity: 0" name="flam-sdk-iframe" src="${newUrl()}" style="opacity: 0"></iframe>      
  </div>
    `;

    await body.appendChild(UI);

    const iFrame = document.getElementById('flam-sdk-iframe');

    iFrame.addEventListener('load', async e => {
      e.preventDefault();

      try {
        if (this.clientData.environment == 'PRODUCTION') {
          await fetch(PAGES.main);
        }

        // hide loading
        document.getElementById('flam-sdk-bg').style.display = 'none';

        // Bring the iframe back
        iFrame.style.opacity = '1';

        trackOrder = e => {
          this.receiveMessage(e);
        };

        // for receiving messages from iframe
        window.addEventListener('message', trackOrder);

        // for sending messages to iframe
        this.iWindow = document.getElementById('flam-sdk-iframe').contentWindow;
      } catch (err) {
        if (err.message === 'Failed to fetch') {
          this.close();
          this.callback({
            code: 500,
            message: 'SDK down!'
          });
        }
      }
    });
  }

  function close() {
    window.removeEventListener('message', trackOrder);

    // remove the UI
    const element = document.getElementById('flam-sdk-wrapper');
    if (element) {
      element.remove();
    }

    // remove the styles
    const styleSheet = document.getElementById('saas-sdk-style');

    if (styleSheet) {
      styleSheet.remove();
    }
  }

  var toString = Object.prototype.toString;

  function attribute(o, attr, type, text) {
      type = type === 'array' ? 'object' : type;
      if (o && typeof o[attr] !== type) {
          throw new Error(text);
      }
  }

  function variable(o, type, text) {
      if (typeof o !== type) {
          throw new Error(text);
      }
  }

  function value(o, values, text) {
      if (values.indexOf(o) === -1) {
          throw new Error(text);
      }
  }

  function check(o, config, attributes) {
      if (!config.optional || o) {
          variable(o, config.type, config.message);
      }
      if (config.type === 'object' && attributes) {
          var keys = Object.keys(attributes);

          for (var index = 0; index < keys.length; index++) {
              var a = keys[index];
              if (!attributes[a].optional || o[a]) {
                  if (!attributes[a].condition || attributes[a].condition(o)) {
                      attribute(o, a, attributes[a].type, attributes[a].message);
                      if (attributes[a].values) {
                          value(o[a], attributes[a].values, attributes[a].value_message);
                      }
                  }
              }
          }
      }
  }

  /**
   * Wrap `Array.isArray` Polyfill for IE9
   * source: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray
   *
   * @param {Array} array
   * @private
   */
  function isArray(array) {
      if (this.supportsIsArray()) {
          return Array.isArray(array);
      }

      return toString.call(array) === '[object Array]';
  }

  function supportsIsArray() {
      return Array.isArray != null;
  }

  var assert = {
      check: check,
      attribute: attribute,
      variable: variable,
      value: value,
      isArray: isArray,
      supportsIsArray: supportsIsArray
  };

  function placeOrder(order_details, callback) {
    this.order_details = order_details;

    try {
      assert.check(
        this.clientData,
        { type: 'object', message: 'clientData parameter is not valid object' },
        {
          key: { type: 'string', message: 'key is required' },
          environment: {
            optional: true,
            type: 'string',
            message: 'environment is required'
          }
        }
      );

      assert.check(
        order_details,
        {
          type: 'object',
          message: 'order_details parameter is not valid object'
        },
        {
          productId: { type: 'string', message: 'productId is required!' }
        },
        {
          refId: { type: 'string', message: 'refId is required!' }
        }
      );

      if (callback) {
        let url = `${PAGES.main}`;
        this.callback = callback;
        this.renderWithRetry({ url, error: false });
      } else {
        throw new Error('callback function is required!');
      }
    } catch (err) {
      if (callback) {
        let url = `${PAGES.error}/Something went wrong!`;
        this.renderWithRetry({
          url,
          error: true
        });
        callback({ code: 400, message: err.message }, null);
      } else {
        throw new Error('callback function is required!');
      }
    }
  }

  function receiveMessage(event) {
    if (event.origin == PAGES.main) {
      switch (event.data.type) {
        case 'CLOSE':
          this.close();
          break;
        case 'READY_TO_RECEIVE':
          this.sendMessage(
            {
              type: 'INITIAL_DATA',
              payload: {
                client_data: this.clientData,
                order_details: this.order_details
              }
            },
            '*'
          );
          break;
        case 'READY_TO_RECEIVE_ERR':
          this.sendMessage(
            {
              type: 'INITIAL_DATA_ERR',
              payload: {
                email: this.order_details.prefill.name || '',
                phone: this.order_details.prefill.phone || ''
              }
            },
            '*'
          );
          break;
        case 'CREATED':
          this.callback(null, {
            code: 201,
            data: event.data.payload,
            message: 'Order placed successfully'
          });
          this.close();
          break;
        case 'ERROR':
          this.callback(
            {
              code: event.data.payload.code,
              message: event.data.payload.message
            },
            null
          );
          break;
      }
    }
  }

  function sendMessage(message) {
    this.iWindow.postMessage(message, '*');
  }

  /**
   * Handles all the browser's AuthN/AuthZ flows
   * @constructor
   * @param {Object} options
   * @param {String} options.key the API Key found on your Application settings page
   * @param {String} [options.environment] enviornment sandbox | production
   * @param {String} [options.name] name of client
   * @param {String} [options.logoUrl] client's brand logo url
   * @param {String} [options.email] client's support email for error page
   * @param {String} [options.phone] client's support phone for error page
   */
  function init(options) {
    /* eslint-disable */
    try {
      assert.check(
        options,
        { type: 'object', message: 'clientData parameter is not valid' },
        {
          key: { type: 'string', message: 'key is required' },
          environment: {
            optional: true,
            type: 'string',
            message: 'environment is required'
          }
        }
      );

      if (options.overrides) {
        assert.check(options.overrides, {
          type: 'object',
          message: 'overrides option is not valid'
        });
      }
    } catch (err) {
      throw new Error(err.message);
    }

    options.environment =
      options &&
      typeof options.environment === 'string' &&
      options.environment.toUpperCase() === 'PRODUCTION'
        ? 'PRODUCTION'
        : 'SANDBOX';

    this.clientData = options;
    /* eslint-enable */
  }

  // core methods
  init.prototype.renderWithRetry = renderWithRetry;
  init.prototype.placeOrder = placeOrder;
  init.prototype.receiveMessage = receiveMessage;
  init.prototype.sendMessage = sendMessage;
  init.prototype.close = close;

  var version = { raw: '1.0.0' };

  var index = { version: version, init: init };

  exports.default = index;
  exports.init = init;
  exports.version = version;

  Object.defineProperty(exports, '__esModule', { value: true });

})));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmxhbVNhYXNTREsuanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9jb25zdGFudHMuanMiLCIuLi9zcmMvcmVuZGVyV2l0aFJldHJ5LmpzIiwiLi4vc3JjL2Nsb3NlSUZyYW1lLmpzIiwiLi4vc3JjL2hlbHBlci9hc3NlcnQuanMiLCIuLi9zcmMvcGxhY2VPcmRlci5qcyIsIi4uL3NyYy9yZWNlaXZlTWVzc2FnZS5qcyIsIi4uL3NyYy9zZW5kTWVzc2FnZS5qcyIsIi4uL3NyYy9zZGsuanMiLCIuLi9zcmMvdmVyc2lvbi5qcyIsIi4uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTREtfQkFTRV9VUkwgPSAnaHR0cHM6Ly9zYWFzLXNkay1mbGFtLnZlcmNlbC5hcHAnO1xuXG5leHBvcnQgY29uc3QgUEFHRVMgPSB7XG4gIG1haW46IFNES19CQVNFX1VSTCxcbiAgZXJyb3I6IGAke1NES19CQVNFX1VSTH0vZXJyb3JgXG59O1xuIiwiaW1wb3J0IHsgUEFHRVMgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBsZXQgdHJhY2tPcmRlciA9IG51bGw7XG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiByZW5kZXJXaXRoUmV0cnkoeyB1cmwgfSkge1xuICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuXG4gIGNvbnN0IHN0eWxlU2hlZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICBzdHlsZVNoZWV0LnR5cGUgPSAndGV4dC9jc3MnO1xuICBzdHlsZVNoZWV0LmlkID0gJ3NhYXMtc2RrLXN0eWxlJztcbiAgc3R5bGVTaGVldC5pbm5lclRleHQgPSBgXG4gICAgLmZsYW0tc2RrLWJnIHtcbiAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgIHRvcDogMDtcbiAgICAgIHJpZ2h0OiAwO1xuICAgICAgYm90dG9tOiAwO1xuICAgICAgbGVmdDogMDtcblxuICAgICAgbWluLWhlaWdodDogMTAwdmg7XG4gICAgICBtaW4td2lkdGg6IDEwMHZ3O1xuICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwgMC40KTtcblxuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICB9XG5cbiAgICAjZmxhbS1zZGstaWZyYW1lIHtcbiAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgIHRvcDogMDtcbiAgICAgIHJpZ2h0OiAwO1xuICAgICAgYm90dG9tOiAwO1xuICAgICAgbGVmdDogMDtcblxuICAgICAgbWluLWhlaWdodDogMTAwdmg7XG4gICAgICBtaW4td2lkdGg6IDEwMHZ3O1xuICAgICAgYm9yZGVyOiBub25lO1xuICAgIH1cblxuICAgIC5mbGFtLXNkay1sb2FkaW5nIHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIHdpZHRoOiA4MHB4O1xuICAgICAgaGVpZ2h0OiA4MHB4O1xuICAgIH1cbiAgICAuZmxhbS1zZGstbG9hZGluZyBkaXYge1xuICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgd2lkdGg6IDY0cHg7XG4gICAgICBoZWlnaHQ6IDY0cHg7XG4gICAgICBtYXJnaW46IDhweDtcbiAgICAgIGJvcmRlcjogM3B4IHNvbGlkICMwMDA7XG4gICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICBhbmltYXRpb246IGZsYW0tc2RrLWxvYWRpbmcgMS4ycyBjdWJpYy1iZXppZXIoMC41LCAwLCAwLjUsIDEpIGluZmluaXRlO1xuICAgICAgYm9yZGVyLWNvbG9yOiAjMDAwIHRyYW5zcGFyZW50IHRyYW5zcGFyZW50IHRyYW5zcGFyZW50O1xuICAgIH1cbiAgICAuZmxhbS1zZGstbG9hZGluZyBkaXY6bnRoLWNoaWxkKDEpIHtcbiAgICAgIGFuaW1hdGlvbi1kZWxheTogLTAuNDVzO1xuICAgIH1cbiAgICAuZmxhbS1zZGstbG9hZGluZyBkaXY6bnRoLWNoaWxkKDIpIHtcbiAgICAgIGFuaW1hdGlvbi1kZWxheTogLTAuM3M7XG4gICAgfVxuICAgIC5mbGFtLXNkay1sb2FkaW5nIGRpdjpudGgtY2hpbGQoMykge1xuICAgICAgYW5pbWF0aW9uLWRlbGF5OiAtMC4xNXM7XG4gICAgfVxuICAgIEBrZXlmcmFtZXMgZmxhbS1zZGstbG9hZGluZyB7XG4gICAgICAwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xuICAgICAgfVxuICAgICAgMTAwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7XG4gICAgICB9XG4gICAgfVxuICBgO1xuXG4gIGF3YWl0IGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVTaGVldCk7XG5cbiAgY29uc3QgVUkgPSBhd2FpdCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgVUkuaWQgPSAnZmxhbS1zZGstd3JhcHBlcic7XG5cbiAgdmFyIFJlZ0V4cCA9IC8oXiNbMC05QS1GXXs2fSQpfCheI1swLTlBLUZdezN9JCkvaTtcblxuICBjb25zdCBuZXdVcmwgPSAoKSA9PiB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5vcmRlcl9kZXRhaWxzICYmXG4gICAgICB0aGlzLm9yZGVyX2RldGFpbHMudGhlbWUgJiZcbiAgICAgIHRoaXMub3JkZXJfZGV0YWlscy50aGVtZS5jb2xvciAmJlxuICAgICAgUmVnRXhwLnRlc3QodGhpcy5vcmRlcl9kZXRhaWxzLnRoZW1lLmNvbG9yKVxuICAgICkge1xuICAgICAgY29uc3QgeCA9ICcvP3RoZW1lPSc7XG4gICAgICByZXR1cm4gdXJsICsgeCArIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLm9yZGVyX2RldGFpbHMudGhlbWUuY29sb3IpO1xuICAgIH1cbiAgICByZXR1cm4gdXJsO1xuICB9O1xuXG4gIFVJLmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJmbGFtLXNkay11aVwiIGlkPVwiZmxhbS1zZGstdWlcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImZsYW0tc2RrLWJnXCIgaWQ9XCJmbGFtLXNkay1iZ1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGFtLXNkay1sb2FkaW5nXCIgaWQ9XCJmbGFtLXNkay1sb2FkaW5nXCI+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjxkaXY+PC9kaXY+PGRpdj48L2Rpdj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxpZnJhbWUgaWQ9XCJmbGFtLXNkay1pZnJhbWVcIiBzdHlsZT1cIm9wYWNpdHk6IDBcIiBuYW1lPVwiZmxhbS1zZGstaWZyYW1lXCIgc3JjPVwiJHtuZXdVcmwoKX1cIiBzdHlsZT1cIm9wYWNpdHk6IDBcIj48L2lmcmFtZT4gICAgICBcbiAgPC9kaXY+XG4gICAgYDtcblxuICBhd2FpdCBib2R5LmFwcGVuZENoaWxkKFVJKTtcblxuICBjb25zdCBpRnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxhbS1zZGstaWZyYW1lJyk7XG5cbiAgaUZyYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBhc3luYyBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKHRoaXMuY2xpZW50RGF0YS5lbnZpcm9ubWVudCA9PSAnUFJPRFVDVElPTicpIHtcbiAgICAgICAgYXdhaXQgZmV0Y2goUEFHRVMubWFpbik7XG4gICAgICB9XG5cbiAgICAgIC8vIGhpZGUgbG9hZGluZ1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZsYW0tc2RrLWJnJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgLy8gQnJpbmcgdGhlIGlmcmFtZSBiYWNrXG4gICAgICBpRnJhbWUuc3R5bGUub3BhY2l0eSA9ICcxJztcblxuICAgICAgdHJhY2tPcmRlciA9IGUgPT4ge1xuICAgICAgICB0aGlzLnJlY2VpdmVNZXNzYWdlKGUpO1xuICAgICAgfTtcblxuICAgICAgLy8gZm9yIHJlY2VpdmluZyBtZXNzYWdlcyBmcm9tIGlmcmFtZVxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0cmFja09yZGVyKTtcblxuICAgICAgLy8gZm9yIHNlbmRpbmcgbWVzc2FnZXMgdG8gaWZyYW1lXG4gICAgICB0aGlzLmlXaW5kb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxhbS1zZGstaWZyYW1lJykuY29udGVudFdpbmRvdztcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGlmIChlcnIubWVzc2FnZSA9PT0gJ0ZhaWxlZCB0byBmZXRjaCcpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB0aGlzLmNhbGxiYWNrKHtcbiAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgbWVzc2FnZTogJ1NESyBkb3duISdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cbiIsImltcG9ydCB7IHRyYWNrT3JkZXIgfSBmcm9tICcuL3JlbmRlcldpdGhSZXRyeSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNsb3NlKCkge1xuICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRyYWNrT3JkZXIpO1xuXG4gIC8vIHJlbW92ZSB0aGUgVUlcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbGFtLXNkay13cmFwcGVyJyk7XG4gIGlmIChlbGVtZW50KSB7XG4gICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgfVxuXG4gIC8vIHJlbW92ZSB0aGUgc3R5bGVzXG4gIGNvbnN0IHN0eWxlU2hlZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Fhcy1zZGstc3R5bGUnKTtcblxuICBpZiAoc3R5bGVTaGVldCkge1xuICAgIHN0eWxlU2hlZXQucmVtb3ZlKCk7XG4gIH1cbn1cbiIsInZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbmZ1bmN0aW9uIGF0dHJpYnV0ZShvLCBhdHRyLCB0eXBlLCB0ZXh0KSB7XG4gICAgdHlwZSA9IHR5cGUgPT09ICdhcnJheScgPyAnb2JqZWN0JyA6IHR5cGU7XG4gICAgaWYgKG8gJiYgdHlwZW9mIG9bYXR0cl0gIT09IHR5cGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRleHQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdmFyaWFibGUobywgdHlwZSwgdGV4dCkge1xuICAgIGlmICh0eXBlb2YgbyAhPT0gdHlwZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IodGV4dCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB2YWx1ZShvLCB2YWx1ZXMsIHRleHQpIHtcbiAgICBpZiAodmFsdWVzLmluZGV4T2YobykgPT09IC0xKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcih0ZXh0KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNoZWNrKG8sIGNvbmZpZywgYXR0cmlidXRlcykge1xuICAgIGlmICghY29uZmlnLm9wdGlvbmFsIHx8IG8pIHtcbiAgICAgICAgdmFyaWFibGUobywgY29uZmlnLnR5cGUsIGNvbmZpZy5tZXNzYWdlKTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy50eXBlID09PSAnb2JqZWN0JyAmJiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoYXR0cmlidXRlcyk7XG5cbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGtleXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGtleXNbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGVzW2FdLm9wdGlvbmFsIHx8IG9bYV0pIHtcbiAgICAgICAgICAgICAgICBpZiAoIWF0dHJpYnV0ZXNbYV0uY29uZGl0aW9uIHx8IGF0dHJpYnV0ZXNbYV0uY29uZGl0aW9uKG8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZShvLCBhLCBhdHRyaWJ1dGVzW2FdLnR5cGUsIGF0dHJpYnV0ZXNbYV0ubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVzW2FdLnZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUob1thXSwgYXR0cmlidXRlc1thXS52YWx1ZXMsIGF0dHJpYnV0ZXNbYV0udmFsdWVfbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogV3JhcCBgQXJyYXkuaXNBcnJheWAgUG9seWZpbGwgZm9yIElFOVxuICogc291cmNlOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9pc0FycmF5XG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyYXlcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXkoYXJyYXkpIHtcbiAgICBpZiAodGhpcy5zdXBwb3J0c0lzQXJyYXkoKSkge1xuICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnJheSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoYXJyYXkpID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuXG5mdW5jdGlvbiBzdXBwb3J0c0lzQXJyYXkoKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkgIT0gbnVsbDtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGNoZWNrOiBjaGVjayxcbiAgICBhdHRyaWJ1dGU6IGF0dHJpYnV0ZSxcbiAgICB2YXJpYWJsZTogdmFyaWFibGUsXG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIGlzQXJyYXk6IGlzQXJyYXksXG4gICAgc3VwcG9ydHNJc0FycmF5OiBzdXBwb3J0c0lzQXJyYXlcbn07IiwiaW1wb3J0IHsgUEFHRVMgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgYXNzZXJ0IGZyb20gJy4vaGVscGVyL2Fzc2VydCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBsYWNlT3JkZXIob3JkZXJfZGV0YWlscywgY2FsbGJhY2spIHtcbiAgdGhpcy5vcmRlcl9kZXRhaWxzID0gb3JkZXJfZGV0YWlscztcblxuICB0cnkge1xuICAgIGFzc2VydC5jaGVjayhcbiAgICAgIHRoaXMuY2xpZW50RGF0YSxcbiAgICAgIHsgdHlwZTogJ29iamVjdCcsIG1lc3NhZ2U6ICdjbGllbnREYXRhIHBhcmFtZXRlciBpcyBub3QgdmFsaWQgb2JqZWN0JyB9LFxuICAgICAge1xuICAgICAgICBrZXk6IHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICdrZXkgaXMgcmVxdWlyZWQnIH0sXG4gICAgICAgIGVudmlyb25tZW50OiB7XG4gICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgbWVzc2FnZTogJ2Vudmlyb25tZW50IGlzIHJlcXVpcmVkJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcblxuICAgIGFzc2VydC5jaGVjayhcbiAgICAgIG9yZGVyX2RldGFpbHMsXG4gICAgICB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBtZXNzYWdlOiAnb3JkZXJfZGV0YWlscyBwYXJhbWV0ZXIgaXMgbm90IHZhbGlkIG9iamVjdCdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHByb2R1Y3RJZDogeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ3Byb2R1Y3RJZCBpcyByZXF1aXJlZCEnIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHJlZklkOiB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAncmVmSWQgaXMgcmVxdWlyZWQhJyB9XG4gICAgICB9XG4gICAgKTtcblxuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgbGV0IHVybCA9IGAke1BBR0VTLm1haW59YDtcbiAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgIHRoaXMucmVuZGVyV2l0aFJldHJ5KHsgdXJsLCBlcnJvcjogZmFsc2UgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY2FsbGJhY2sgZnVuY3Rpb24gaXMgcmVxdWlyZWQhJyk7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIGxldCB1cmwgPSBgJHtQQUdFUy5lcnJvcn0vU29tZXRoaW5nIHdlbnQgd3JvbmchYDtcbiAgICAgIHRoaXMucmVuZGVyV2l0aFJldHJ5KHtcbiAgICAgICAgdXJsLFxuICAgICAgICBlcnJvcjogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBjYWxsYmFjayh7IGNvZGU6IDQwMCwgbWVzc2FnZTogZXJyLm1lc3NhZ2UgfSwgbnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY2FsbGJhY2sgZnVuY3Rpb24gaXMgcmVxdWlyZWQhJyk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBQQUdFUyB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVjZWl2ZU1lc3NhZ2UoZXZlbnQpIHtcbiAgaWYgKGV2ZW50Lm9yaWdpbiA9PSBQQUdFUy5tYWluKSB7XG4gICAgc3dpdGNoIChldmVudC5kYXRhLnR5cGUpIHtcbiAgICAgIGNhc2UgJ0NMT1NFJzpcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ1JFQURZX1RPX1JFQ0VJVkUnOlxuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6ICdJTklUSUFMX0RBVEEnLFxuICAgICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgICBjbGllbnRfZGF0YTogdGhpcy5jbGllbnREYXRhLFxuICAgICAgICAgICAgICBvcmRlcl9kZXRhaWxzOiB0aGlzLm9yZGVyX2RldGFpbHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgICcqJ1xuICAgICAgICApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ1JFQURZX1RPX1JFQ0VJVkVfRVJSJzpcbiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZShcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiAnSU5JVElBTF9EQVRBX0VSUicsXG4gICAgICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgICAgIGVtYWlsOiB0aGlzLm9yZGVyX2RldGFpbHMucHJlZmlsbC5uYW1lIHx8ICcnLFxuICAgICAgICAgICAgICBwaG9uZTogdGhpcy5vcmRlcl9kZXRhaWxzLnByZWZpbGwucGhvbmUgfHwgJydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgICcqJ1xuICAgICAgICApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0NSRUFURUQnOlxuICAgICAgICB0aGlzLmNhbGxiYWNrKG51bGwsIHtcbiAgICAgICAgICBjb2RlOiAyMDEsXG4gICAgICAgICAgZGF0YTogZXZlbnQuZGF0YS5wYXlsb2FkLFxuICAgICAgICAgIG1lc3NhZ2U6ICdPcmRlciBwbGFjZWQgc3VjY2Vzc2Z1bGx5J1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0VSUk9SJzpcbiAgICAgICAgdGhpcy5jYWxsYmFjayhcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb2RlOiBldmVudC5kYXRhLnBheWxvYWQuY29kZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGV2ZW50LmRhdGEucGF5bG9hZC5tZXNzYWdlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBudWxsXG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2VuZE1lc3NhZ2UobWVzc2FnZSkge1xuICB0aGlzLmlXaW5kb3cucG9zdE1lc3NhZ2UobWVzc2FnZSwgJyonKTtcbn1cbiIsImltcG9ydCBjbG9zZUlmcmFtZSBmcm9tICcuL2Nsb3NlSUZyYW1lJztcbmltcG9ydCBhc3NlcnQgZnJvbSAnLi9oZWxwZXIvYXNzZXJ0JztcbmltcG9ydCBwbGFjZU9yZGVyIGZyb20gJy4vcGxhY2VPcmRlcic7XG5pbXBvcnQgcmVjZWl2ZU1lc3NhZ2UgZnJvbSAnLi9yZWNlaXZlTWVzc2FnZSc7XG5pbXBvcnQgcmVuZGVyV2l0aFJldHJ5IGZyb20gJy4vcmVuZGVyV2l0aFJldHJ5JztcbmltcG9ydCBzZW5kTWVzc2FnZSBmcm9tICcuL3NlbmRNZXNzYWdlJztcblxuLyoqXG4gKiBIYW5kbGVzIGFsbCB0aGUgYnJvd3NlcidzIEF1dGhOL0F1dGhaIGZsb3dzXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9ucy5rZXkgdGhlIEFQSSBLZXkgZm91bmQgb24geW91ciBBcHBsaWNhdGlvbiBzZXR0aW5ncyBwYWdlXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuZW52aXJvbm1lbnRdIGVudmlvcm5tZW50IHNhbmRib3ggfCBwcm9kdWN0aW9uXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMubmFtZV0gbmFtZSBvZiBjbGllbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5sb2dvVXJsXSBjbGllbnQncyBicmFuZCBsb2dvIHVybFxuICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLmVtYWlsXSBjbGllbnQncyBzdXBwb3J0IGVtYWlsIGZvciBlcnJvciBwYWdlXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMucGhvbmVdIGNsaWVudCdzIHN1cHBvcnQgcGhvbmUgZm9yIGVycm9yIHBhZ2VcbiAqL1xuZnVuY3Rpb24gaW5pdChvcHRpb25zKSB7XG4gIC8qIGVzbGludC1kaXNhYmxlICovXG4gIHRyeSB7XG4gICAgYXNzZXJ0LmNoZWNrKFxuICAgICAgb3B0aW9ucyxcbiAgICAgIHsgdHlwZTogJ29iamVjdCcsIG1lc3NhZ2U6ICdjbGllbnREYXRhIHBhcmFtZXRlciBpcyBub3QgdmFsaWQnIH0sXG4gICAgICB7XG4gICAgICAgIGtleTogeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ2tleSBpcyByZXF1aXJlZCcgfSxcbiAgICAgICAgZW52aXJvbm1lbnQ6IHtcbiAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICBtZXNzYWdlOiAnZW52aXJvbm1lbnQgaXMgcmVxdWlyZWQnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuXG4gICAgaWYgKG9wdGlvbnMub3ZlcnJpZGVzKSB7XG4gICAgICBhc3NlcnQuY2hlY2sob3B0aW9ucy5vdmVycmlkZXMsIHtcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIG1lc3NhZ2U6ICdvdmVycmlkZXMgb3B0aW9uIGlzIG5vdCB2YWxpZCdcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGVyci5tZXNzYWdlKTtcbiAgfVxuXG4gIG9wdGlvbnMuZW52aXJvbm1lbnQgPVxuICAgIG9wdGlvbnMgJiZcbiAgICB0eXBlb2Ygb3B0aW9ucy5lbnZpcm9ubWVudCA9PT0gJ3N0cmluZycgJiZcbiAgICBvcHRpb25zLmVudmlyb25tZW50LnRvVXBwZXJDYXNlKCkgPT09ICdQUk9EVUNUSU9OJ1xuICAgICAgPyAnUFJPRFVDVElPTidcbiAgICAgIDogJ1NBTkRCT1gnO1xuXG4gIHRoaXMuY2xpZW50RGF0YSA9IG9wdGlvbnM7XG4gIC8qIGVzbGludC1lbmFibGUgKi9cbn1cblxuLy8gY29yZSBtZXRob2RzXG5pbml0LnByb3RvdHlwZS5yZW5kZXJXaXRoUmV0cnkgPSByZW5kZXJXaXRoUmV0cnk7XG5pbml0LnByb3RvdHlwZS5wbGFjZU9yZGVyID0gcGxhY2VPcmRlcjtcbmluaXQucHJvdG90eXBlLnJlY2VpdmVNZXNzYWdlID0gcmVjZWl2ZU1lc3NhZ2U7XG5pbml0LnByb3RvdHlwZS5zZW5kTWVzc2FnZSA9IHNlbmRNZXNzYWdlO1xuaW5pdC5wcm90b3R5cGUuY2xvc2UgPSBjbG9zZUlmcmFtZTtcblxuZXhwb3J0IGRlZmF1bHQgaW5pdDtcbiIsIm1vZHVsZS5leHBvcnRzID0geyByYXc6ICcxLjAuMCcgfTsiLCJpbXBvcnQgaW5pdCBmcm9tICcuL3Nkayc7XG5pbXBvcnQgdmVyc2lvbiBmcm9tICcuL3ZlcnNpb24nO1xuXG5leHBvcnQgeyB2ZXJzaW9uLCBpbml0IH07XG5cbmV4cG9ydCBkZWZhdWx0IHsgdmVyc2lvbjogdmVyc2lvbiwgaW5pdDogaW5pdCB9O1xuIl0sIm5hbWVzIjpbImNsb3NlSWZyYW1lIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0VBQUEsTUFBTSxZQUFZLEdBQUcsa0NBQWtDLENBQUM7QUFDeEQ7RUFDTyxNQUFNLEtBQUssR0FBRztFQUNyQixFQUFFLElBQUksRUFBRSxZQUFZO0VBQ3BCLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxZQUFZLENBQUMsTUFBTSxDQUFDO0VBQ2hDLENBQUM7O0VDSE0sSUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQzdCLEVBQWUsZUFBZSxlQUFlLENBQUMsRUFBRSxHQUFHLEVBQUUsRUFBRTtFQUN2RCxFQUFFLE1BQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDOUM7RUFDQSxFQUFFLE1BQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7RUFDckQsRUFBRSxVQUFVLENBQUMsSUFBSSxHQUFHLFVBQVUsQ0FBQztFQUMvQixF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

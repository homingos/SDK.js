/**
 * flamsdk v2.0.4-beta.0
 * Author: bucharitesh
 * Date: 2023-03-10
 * License: MIT
 */

function warn(message){const styles=["color: black","background: yellow"].join(";");message="[ZINGCAM SDK]: "+message,console.log("%c%s",styles,message)}const unmountSDK=()=>{document.getElementById("flam-sdk-wrapper").remove();document.getElementById("saas-sdk-style").remove(),window.__SDK_READY=!1,window.removeEventListener("message",window.__FlamSDKListener)};const handleSend=message=>{document.getElementById("flam-sdk-iframe").contentWindow.postMessage(message,"*")},renderIframe=link=>{const styleSheet=document.createElement("style");styleSheet.id="saas-sdk-style",styleSheet.innerText="\n    body {\n      overflow: hidden;\n    }\n\n    #flam-sdk-loading-wrapper {\n      display: none;\n      position: fixed;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      min-height: 100vh;\n      min-width: 100vw;\n      overflow: hidden;\n      border: none;\n      background: rgba(0,0,0, 0.4);\n      justify-content: center;\n      align-items: center;\n      z-index: 1000;\n    }\n\n    #flam-sdk-iframe {\n      position: fixed;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n\n      min-height: 100vh;\n      min-width: 100vw;\n      border: none;\n      z-index: 1000;\n    }\n\n    #flam-sdk-loading {\n      width: 48px;\n      height: 48px;\n      border: 5px solid #FFF;\n      border-bottom-color: transparent;\n      border-radius: 50%;\n      display: inline-block;\n      box-sizing: border-box;\n      animation: sdkrotation 1s linear infinite;\n      }\n  \n    @keyframes sdkrotation {\n      0% {\n          transform: rotate(0deg);\n      }\n      100% {\n          transform: rotate(360deg);\n      }\n    }\n  ",document.head.appendChild(styleSheet);const body=document.querySelector("body"),wrapper=document.createElement("div");wrapper.id="flam-sdk-wrapper",wrapper.innerHTML=`\n    <iframe id="flam-sdk-iframe" style="display: none" name="flam-sdk-iframe" src='${link}' style="opacity: 0"></iframe>\n    <div id="flam-sdk-loading-wrapper">\n      <span id="flam-sdk-loading"></span>\n    </div>\n  `,body.appendChild(wrapper)};function loadFrame(data){window.__FlamSDKListener=e=>{!function(data,link){switch(data.type){case"READY":window.__SDK_READY=!0,console.log("READY_READY test"),handleSend({type:"INITIAL_DATA",message:localStorage.getItem("options")});break;case"CLOSE":unmountSDK();break;case"DIRECT_CLOSE":unmountSDK(),window.handleClose();break;case"SUCCESS":unmountSDK(),window.handleSuccess(data.message);break;case"FAIL":window.handleFailure(data.message);break;default:console.log(data)}}(e.data,localStorage.getItem("__FLAM_SDK_LINK"))},window.addEventListener("message",window.__FlamSDKListener,!1),renderIframe(localStorage.getItem("__FLAM_SDK_LINK")),window.handleSuccess=data.handleSuccess,window.handleFailure=data.handleFailure,window.handleClose=data.handleClose;document.getElementById("flam-sdk-loading-wrapper").style.display="flex",displayFrameOnReady(data)}function displayFrameOnReady(data){setTimeout((()=>{if(window.__SDK_READY){document.getElementById("flam-sdk-loading-wrapper").style.display="none";return document.getElementById("flam-sdk-iframe").style.display="block",void handleSend({type:"CLIENT_DATA",message:JSON.stringify(data)})}displayFrameOnReady(data)}),500)}const RELEASE_TYPE="BETA",links={BETA:["https://dev.sdk.zingcam.tech","https://stage.sdk.zingcam.tech"],STABLE:["https://prod.sdk.zingcam.tech","https://stage.sdk.zingcam.tech"]};function init(options){try{if(!options||"object"!=typeof options)throw new Error("Invalid paramerters passed");if(!options.key||"string"!=typeof options.key)throw new Error("KEY is required or missing !!");if(!options.environment||"string"!=typeof options.environment)throw new Error("ENVIRONMENT must be STAGE or PRODUCTION !!");const link=links[RELEASE_TYPE]["PRODUCTION"===options.environment?0:1];localStorage.setItem("options",JSON.stringify(options)),localStorage.setItem("__FLAM_SDK_LINK",link)}catch(err){warn(err.message)}}init.prototype.placeOrder=function(data){try{if(!data||"object"!=typeof data)throw new Error("Invalid paramerters passed");if(!data.productId||"string"!=typeof data.productId)throw new Error("PRODUCT ID is invalid or missing");if(!data.varientId||"string"!=typeof data.varientId)throw new Error("VARIENT ID is invalid or missing");if(!data.refId||"string"!=typeof data.refId)throw new Error("REF ID is invalid or missing");if(!data.photo||"object"!=typeof data.photo)throw new Error("photo options are invalid or missing");if(!data.video||"object"!=typeof data.video)throw new Error("video options are invalid or missing");loadFrame(data)}catch(err){warn(err.message)}},init.prototype.updateOrder=function(data){try{if(!data||"object"!=typeof data)throw new Error("Invalid paramerters passed");if(!data.refId||"string"!=typeof data.refId)throw new Error("REF ID is invalid or missing");loadFrame({...data,existingOrder:!0})}catch(err){warn(err.message)}};var version={raw:"2.0.4-beta.0"},index={version:version,init:init};export{index as default,init,version};
//# sourceMappingURL=FlamSaasSDK.min.esm.js.map
